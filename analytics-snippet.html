<!-- ============================================= -->
<!-- COPY THIS CODE TO <head> OF EVERY HTML PAGE -->
<!-- ============================================= -->

<!-- Google tag (gtag.js) - Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T486B8C5X0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  
  // Basic configuration
  gtag('config', 'G-T486B8C5X0', {
    'send_page_view': true,
    'anonymize_ip': true
  });
</script>

<!-- Enhanced Event Tracking -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Track button clicks
  document.querySelectorAll('button').forEach(function(btn) {
    btn.addEventListener('click', function() {
      gtag('event', 'button_click', {
        'event_category': 'engagement',
        'event_label': btn.textContent || 'Button',
        'value': 1
      });
    });
  });

  // Track navigation clicks
  document.querySelectorAll('a').forEach(function(link) {
    link.addEventListener('click', function() {
      var isExternal = link.hostname !== window.location.hostname;
      gtag('event', isExternal ? 'outbound_click' : 'internal_click', {
        'event_category': isExternal ? 'outbound' : 'navigation',
        'event_label': link.href,
        'value': 1
      });
    });
  });

  // Track scroll depth
  var maxScroll = 0;
  window.addEventListener('scroll', function() {
    var percent = Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);
    if (percent > maxScroll && [25, 50, 75, 100].includes(percent)) {
      maxScroll = percent;
      gtag('event', 'scroll', {
        'event_category': 'engagement',
        'event_label': percent + '%',
        'value': percent
      });
    }
  });

  // Track form submissions
  document.querySelectorAll('form').forEach(function(form) {
    form.addEventListener('submit', function() {
      gtag('event', 'form_submit', {
        'event_category': 'engagement',
        'event_label': 'Calculator',
        'value': 1
      });
    });
  });
});
</script>
